syntax = "proto3";

package financio.trading;

import "trading/lifecycle.proto";
import "trading/control.proto";
import "trading/state.proto";

// Unified envelopes
message FrontendToBackend {
  oneof kind {
    FrontendCommand     control = 1;
    ControlMessage      message = 2;
  }
}

message BackendToFrontend {
  oneof kind {
    BackendStatusUpdate status   = 1;
    StateMessage        state   = 2;
  }
}

// Main bidirectional session
service TradingLink {
  rpc Session(stream ControlMessage) returns (stream StateMessage);
}

// Simple health check
message HealthPing { 
    string note = 1; 
}

message HealthPong { 
    string note = 1; 
}

service TraderControl {
  rpc CheckHealth(HealthPing) returns (HealthPong);
}
